---
title: "Agent to Agent Integration"
description: "Enable autonomous transactions between AI agents"
---

Allow agents to transact autonomously without human intervention. This pattern is ideal for agent marketplaces, paid MCP tools, and machine-to-machine commerce.

## <Icon icon="robot" size={20} /> Overview

In the Agent to Agent model, each agent controls a wallet. Agents can pay one another directly using blockchain-backed transfers.

**Common use cases:**
- Agents purchasing or selling data, APIs, or services
- Automated settlement of usage-based pricing
- Monetization of MCP tools and capabilities

## <Icon icon="list-check" size={20} /> Prerequisites

<Steps>
  <Step title="Install PayLink">
    Make sure PayLink is installed in your environment. Follow the [Installation](/start-building/install) guide if you still need to set it up.
  </Step>

  <Step title="Configure your environment">
    Create a `.env` file with PayLink credentials and your blockchain provider settings.

    ```bash
    WALLET_CONNECTION_STRING="tron+https://nile.trongrid.io"
    ```

    Replace the placeholder values with the credentials for your PayLink account and testnet provider.
  </Step>

  <Step title="Create a PayLink account">
    Sign up from the PayLink dashboard and confirm your email to access the console.

    <Frame>
      <img src="/images/install/signup.png" alt="PayLink sign up form" />
    </Frame>
  </Step>

  <Step title="Create your project">
    After signing in, create a project to group wallets, keys, and tracing for this integration.

    <Frame>
      <img src="/images/install/create_project.png" alt="Create project screen in PayLink dashboard" />
    </Frame>
  </Step>

  <Step title="Copy the wallet connection token">
    PayLink automatically provisions wallets for your project. Navigate to the **Wallets** tab, choose the wallet you will use for agent-to-agent transfers, and copy its connection token into your `.env` file.

    <Frame>
      <img src="/images/wallet/wallet.png" alt="Wallet dashboard showing connection tokens" />
    </Frame>
  </Step>


</Steps>

<Warning>
  Treat blockchain private keys like production secrets. Store them securely and never commit them to source control.
</Warning>

<Tip>
  Use testnet RPC endpoints (such as Tron Nile or Ethereum Sepolia) while validating your integration so you are not spending real funds.
</Tip>

## <Icon icon="wand-magic-sparkles" size={20} /> Implementation

This walkthrough shows how to connect to a monetized MCP server with PayLink so autonomous agents can pay for tool invocations before the request executes.

<Steps>
  <Step title="Initialize PayLink MCP adapter">
    ```python
    from paylink import McpMonitizationAdapter

    client = McpMonitizationAdapter(
        url="http://0.0.0.0:5002/mcp",
        wallet_connection_string="pl_conn_live_0oZ38_eqvrPaxeXbYgZj_w",
        transport="streamable_http",
    )
    ```
  </Step>

  <Step title="Discover available tools">
    ```python
    list_tools = await client.list_tools()
    print(list_tools)
    ```

    Review the metadata to confirm which tools require payment and what parameters they expect.
  </Step>

  <Step title="Call a monetized tool">
    ```python
    tool_response = await client.call_tool("add", {"a": 1, "b": 2})
    print(tool_response)
    ```

    PayLink handles the payment flow before the MCP server executes the tool. The response contains both the MCP result and payment information.
  </Step>

  <Step title="Review wallet transactions">
    Open the PayLink dashboard, navigate to **Wallets**, and select your MCP wallet to inspect incoming payments generated by these tool calls.

    <Frame>
      <img src="/images/wallet/wallet_transaction.png" alt="Wallet transaction list showing MCP payments" />
    </Frame>
  </Step>
</Steps>

## <Icon icon="book-open" size={20} /> Complete example

```python
import asyncio
from paylink import McpMonitizationAdapter

async def main():
    client = McpMonitizationAdapter(
        url="http://0.0.0.0:5002/mcp",
        wallet_connection_string="pl_conn_live_0oZ38_eqvrPaxeXbYgZj_w",
        transport="streamable_http",
    )

    tools = await client.list_tools()
    print("Available tools:", tools)

    response = await client.call_tool("add", {"a": 1, "b": 2})
    print("Tool response:", response)

if __name__ == "__main__":
    asyncio.run(main())
```

## <Icon icon="flag-checkered" size={20} /> What you achieved

<Check>
  - You provisioned PayLink credentials and connected to a blockchain testnet provider.
  - You created dedicated wallets for autonomous agents and funded them safely with test tokens.
  - You executed a programmatic agent-to-agent transfer and reviewed the resulting transaction data.
  - Your agents can now reuse this flow within their loops to pay other agents or monetize their own services.
</Check>

## <Icon icon="shield" size={20} /> Safeguards

<AccordionGroup>
  <Accordion title="Set spending limits">
    Configure daily limits or maximum transaction amounts for each agent wallet.
  </Accordion>
  <Accordion title="Monitor transactions">
    Periodically retrieve transaction history to detect unexpected behavior.
  </Accordion>
  <Accordion title="Alert on large transfers">
    Trigger notifications or human review for transactions above a defined threshold.
  </Accordion>
</AccordionGroup>

## <Icon icon="arrow-right" size={20} /> Next steps

<CardGroup cols={2}>
  <Card title="Monetize Your Tools" icon="coins" href="/start-building/install">
    Learn how to require payment before your MCP tools execute.
  </Card>
  <Card title="Agent to Human" icon="user-shield" href="/agent-to-human/setup">
    Capture payment approvals from human users.
  </Card>
</CardGroup>
